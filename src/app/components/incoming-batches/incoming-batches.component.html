<div fxFill class="ms-blur-container" fxLayout="column">
  <h1 class="ms-header">Incoming Orders</h1>

  <div fxFlex class="ms-order-batch-container" fxLayout="column" (scroll)="onScroll()">

    <!-- this div should be repeated for every batch -->
    <div *ngFor="let batch of batches; let i=index;">

      <!-- Order wrapper -->
      <div class="{{i % 2 === 1 ? 'ms-batch-wrapper-dark' : 'ms-batch-wrapper-light'}}" style="padding: 0 0 3px 0;"
           fxLayout="row" fxLayoutAlign="space-between stretch">
        <div fxLayout="column" fxFlex>
          <div *ngFor="let order of batch.orders" style="margin: 2px 0;">
            <div fxLayout="row" fxLayoutAlign="start center"
              class="{{order.markedDone ? 'ms-order-container ms-order-done' : 'ms-order-container ms-order-todo'}}"
                 (click)="order.markedDone = !order.markedDone; checkBatchStatus()">
              <div fxFlex="initial" class="product-name">
                <p>{{order.orderInfo.productName}}</p>
              </div>
            </div>
          </div>
        </div>

        <button mat-raised-button class="ms-send-batch-button" [disabled]="!batch.markDone">
          <p>Send</p>
          <div fxLayout="row" fxLayoutAlign="center center">
            <mat-icon>alarm</mat-icon>
            <span>{{batch.timeRemaining}}</span>
          </div>
        </button>
      </div>
    </div>
  </div>

  <ms-page-selector fxFlex="initial"
                    (newPage)="onNewPageSelected($event)"
                    [numberOfPages]="numberOfBatches"
                    [currentPage]="currentPage"></ms-page-selector>
</div>
